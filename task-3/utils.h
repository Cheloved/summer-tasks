/**
 * @file utils.h
 * @brief Вспомогательные функции для работы со строками в общем буфере.
 *
 * Содержит объявления функций, используемых алгоритмами сортировки для:
 * - получения длины строки по индексу,
 * - сравнения двух строк по их позиции в буфере,
 * - конкатенации строк по массиву индексов.
 *
 * @author Ракитин Илья Алексеевич
 */

#pragma once

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/**
 * @brief Получает длину строки, начинающейся с заданного индекса.
 *
 * Строка считается до символа '\n' или '\0'.
 *
 * @param input Указатель на начало текстового буфера.
 * @param idx Индекс начала строки.
 * @return Длина строки.
 */
int get_line_len(char* input, long idx);

/**
 * @brief Сравнивает две строки по их начальным индексам в общем буфере.
 *
 * Сравнение производится до '\n' или '\0' в каждой из строк.
 *
 * @param input Указатель на начало текстового буфера.
 * @param a Индекс начала первой строки.
 * @param b Индекс начала второй строки.
 * @return Отрицательное число, если первая строка меньше; положительное — если больше;
 *         ноль — если строки равны.
 */
int linecmp(char* input, long a, long b);

/**
 * @brief Соединяет строки, указанные через массив индексов, в один буфер.
 *
 * Каждая строка копируется от своего индекса до '\n' или '\0', затем добавляется '\n'.
 *
 * @param input Указатель на начало текстового буфера.
 * @param lines Количество строк.
 * @param idxs Массив индексов начала строк.
 * @param buffer Буфер для результата.
 * @return Возвращает 0 при успешном завершении.
 */
int lines_concat(char* input, int lines, long* idxs, char* buffer);
